---
title: "Creation of white_working_data"
author: "Andia Chaves Fonnegra"
date: "7/18/2017"
output: pdf_document
---

# Introduction
This file is to prepare the data before feeding it into the model.
Here I scaled data and do shanges on the working data


# Data preparation

```{r setup, include=FALSE, warnings=FALSE}
library(knitr)
opts_knit$set(root.dir='../')                     # definining working directory; or normalizePath('../')
opts_chunk$set(fig.align='center',                # aligns all figures
                echo=TRUE,                        # shows r-code
                message=FALSE,                    # suppresses library outputs
                warnings=FALSE,                   # suppresses library outputs
                tidy=TRUE,  # prevents the source code from running off a pdf page
                dev='pdf')                        # pdf device
```


## Loading data
```{r}
# load data & libraries - Loading Raw data file as r.data
load(file="Data/Whiteplague_rawdata.rdata")
ls()
#check data
dim(Whiteplague_rawdata)
head(Whiteplague_rawdata)

load('data/whiteplaque_rawdata.RData')

#check data
White <- WhitePlaque
ls(White)
dim(White)
head(White)
```


## Data preparation
All environmental data is scaled due to difference in units, this to avoid adding more variability in the analysis
```{r data_preparation}
Whiteplague_rawdata$Chl_sca   <- scale(Whiteplague_rawdata$Chlorophyll)
Whiteplague_rawdata$Cond_sca    <- scale(Whiteplague_rawdata$Conductivity)
Whiteplague_rawdata$Den_sca    <- scale(Whiteplague_rawdata$Density)
Whiteplague_rawdata$DepCTD_sca    <- scale(Whiteplague_rawdata$Depth_CTD)
Whiteplague_rawdata$Oxy_sca   <- scale(Whiteplague_rawdata$Oxygen)
Whiteplague_rawdata$Sal_sca    <- scale(Whiteplague_rawdata$Salinity)
Whiteplague_rawdata$Turb_sca    <- scale(Whiteplague_rawdata$Turbidity)
Whiteplague_rawdata$Depth_tran_sca  <- scale(Whiteplague_rawdata$Depth_transect)
Whiteplague_rawdata$Temp_sca    <- scale(Whiteplague_rawdata$Temperature)
Whiteplague_rawdata$DHW_sca    <- scale(Whiteplague_rawdata$Max_DHW)
Whiteplague_rawdata$Rain_sca    <- scale(Whiteplague_rawdata$Rainfall)

#Sorting the data frame so Months can be in numerical order
Whiteplague_working_data<-Whiteplague_rawdata[order(Whiteplague_rawdata$Month_12),]
Whiteplague_working_data

```

## Saving data
```{r}
#Save working data  file with data already scaled/ and or transformed to be used by the model
save(Whiteplague_working_data,file="Data/Whiteplague_working_data.rdata")
ls()
#check data
ls(Whiteplague_working_data)
dim(Whiteplague_working_data)
head(Whiteplague_working_data)

#count how many samples per month we have in total
library(plyr)
count(Whiteplague_working_data$Month_12)
```

