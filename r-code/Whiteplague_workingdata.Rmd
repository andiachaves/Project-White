---
title: "Creation of white_working_data"
author: "Andia Chaves Fonnegra"
date: "7/18/2017"
output: pdf_document
---


```{r setup, include=FALSE, warnings=FALSE}
library(knitr)
opts_knit$set(root.dir='../')                     # definining working directory; or normalizePath('../')
opts_chunk$set(fig.align='center',                # aligns all figures
                echo=TRUE,                        # shows r-code
                message=FALSE,                    # suppresses library outputs
                warnings=FALSE,                   # suppresses library outputs
                tidy=TRUE,  # prevents the source code from running off a pdf page
                dev='pdf')                        # pdf device
```

# Introduction
This file is to prepare the data before feeding it into the model.
Data was scaled and saved as working_data file to feed into the model


## Loading data
```{r}
# load data & libraries - Loading Raw data file as r.data
load(file="data/Whiteplague_rawdata.Rdata")
ls()
#check data
dim(Whiteplague_rawdata)
head(Whiteplague_rawdata)
```


## Data preparation
```{r data_preparation}
#All environmental data is scaled due to difference in units, this to avoid adding more variability in the analysis
Whiteplague_rawdata$Chl_sca   <- scale(Whiteplague_rawdata$Chlorophyll)
Whiteplague_rawdata$Cond_sca    <- scale(Whiteplague_rawdata$Conductivity)
Whiteplague_rawdata$Den_sca    <- scale(Whiteplague_rawdata$Density)
Whiteplague_rawdata$DepCTD_sca    <- scale(Whiteplague_rawdata$Depth_CTD)
Whiteplague_rawdata$Oxy_sca   <- scale(Whiteplague_rawdata$Oxygen)
Whiteplague_rawdata$Sal_sca    <- scale(Whiteplague_rawdata$Salinity)
Whiteplague_rawdata$Turb_sca    <- scale(Whiteplague_rawdata$Turbidity)
Whiteplague_rawdata$Depth_tran_sca  <- scale(Whiteplague_rawdata$Depth_transect)
Whiteplague_rawdata$Temp_sca    <- scale(Whiteplague_rawdata$Temperature)
Whiteplague_rawdata$DHW_sca    <- scale(Whiteplague_rawdata$Max_DHW)
Whiteplague_rawdata$Rain_sca    <- scale(Whiteplague_rawdata$Rainfall)

#Sorting the data frame so Months can be in numerical order


Whiteplague_working_data<-Whiteplague_rawdata[order(Whiteplague_rawdata$Month_12),]
head(Whiteplague_working_data)

Whiteplague_workingdata<-Whiteplague_rawdata[order(Whiteplague_rawdata$Month_12),]
Whiteplague_workingdata


Whiteplague_working_data<-Whiteplague_rawdata[order(Whiteplague_rawdata$Month_12),]
head(Whiteplague_working_data)



ls()
#check data
ls(Whiteplague_workingdata)
dim(Whiteplague_workingdata)
head(Whiteplague_workingdata)

#count how many samples per month we have in total this is to later define in the model
library(plyr)
count(Whiteplague_workingdata$Month_12)
```

## Saving data
```{r}
#Save working data  file with data already scaled/ and or transformed to be used by the model
save(Whiteplague_workingdata,file="data/Whiteplague_workingdata.Rdata")
```

